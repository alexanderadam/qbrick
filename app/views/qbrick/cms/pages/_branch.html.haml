- unless pages.blank?
  %ol.page-tree__list
    - pages.each do |page|
      %li.page-tree__item{ 'data-id' => page.id }
        %button.page-tree__handle
          - streusel_icon('order')
        .page-tree__content{ class: page.state_class }
          = link_to page.title.presence, qbrick.edit_cms_page_path(page)

          .btn__group
            - if page.children.empty?
              = link_to qbrick.cms_page_path(page), confirm: t('qbrick.cms.admin.confirm_delete', name: page.title), method: :delete, class: 'btn btn--icon' do
                - streusel_icon('trash')

            = link_to qbrick.new_cms_page_path(parent_id: page.id), class: 'btn btn--icon' do
              - streusel_icon('add')
              = t('qbrick.cms.pages.index.add_page')

        - unless page.children.empty?
          = render partial: 'branch', locals: { pages:  page.children }
